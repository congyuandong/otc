var general_dates = ["2014-01-01","2014-01-02","2014-01-03","2014-01-04","2014-01-05","2014-01-06","2014-01-07","2014-01-08","2014-01-09","2014-01-10","2014-01-11","2014-01-12","2014-01-13","2014-01-14","2014-01-15","2014-01-16","2014-01-17","2014-01-18","2014-01-19","2014-01-20","2014-01-21","2014-01-22","2014-01-23","2014-01-24","2014-01-25","2014-01-26","2014-01-27","2014-01-28","2014-01-29","2014-01-30","2014-01-31","2014-02-01","2014-02-02","2014-02-03","2014-02-04","2014-02-05","2014-02-06","2014-02-07","2014-02-08","2014-02-09","2014-02-10","2014-02-11","2014-02-12","2014-02-13","2014-02-14","2014-02-15","2014-02-16","2014-02-17","2014-02-18","2014-02-19","2014-02-20","2014-02-21","2014-02-22","2014-02-23","2014-02-24","2014-02-25","2014-02-26","2014-02-27","2014-02-28","2014-03-01","2014-03-02","2014-03-03","2014-03-04","2014-03-05","2014-03-06","2014-03-07","2014-03-08","2014-03-09","2014-03-10","2014-03-11","2014-03-12","2014-03-13","2014-03-14","2014-03-15","2014-03-16","2014-03-17","2014-03-18","2014-03-19","2014-03-20","2014-03-21","2014-03-22","2014-03-23","2014-03-24","2014-03-25","2014-03-26","2014-03-27","2014-03-28","2014-03-29","2014-03-30","2014-03-31","2014-04-01","2014-04-02","2014-04-03","2014-04-04","2014-04-05","2014-04-06","2014-04-07","2014-04-08","2014-04-09","2014-04-10","2014-04-11","2014-04-12","2014-04-13","2014-04-14","2014-04-15","2014-04-16","2014-04-17","2014-04-18","2014-04-19","2014-04-20","2014-04-21","2014-04-22","2014-04-23","2014-04-24","2014-04-25","2014-04-26","2014-04-27","2014-04-28","2014-04-29","2014-04-30","2014-05-01","2014-05-02","2014-05-03","2014-05-04","2014-05-05","2014-05-06","2014-05-07","2014-05-08","2014-05-09","2014-05-10","2014-05-11","2014-05-12","2014-05-13","2014-05-14","2014-05-15","2014-05-16","2014-05-17","2014-05-18","2014-05-19","2014-05-20","2014-05-21","2014-05-22","2014-05-23","2014-05-24","2014-05-25","2014-05-26","2014-05-27","2014-05-28","2014-05-29","2014-05-30","2014-05-31","2014-06-01","2014-06-02","2014-06-03","2014-06-04","2014-06-05","2014-06-06","2014-06-07","2014-06-08","2014-06-09","2014-06-10","2014-06-11","2014-06-12","2014-06-13","2014-06-14","2014-06-15","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-20","2014-06-21","2014-06-22","2014-06-23","2014-06-24","2014-06-25","2014-06-26","2014-06-27","2014-06-28","2014-06-29","2014-06-30","2014-07-01","2014-07-02","2014-07-03","2014-07-04","2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11","2014-07-12","2014-07-13"];
var general_min_y = 99;
var general_max_y = 212;
var general_y = [100,99.71,99.62,99.62,99.62,99.89,100.92,101.46,102.33,102.34,102.34,102.34,106.79,107.08,107.22,107.87,106.53,106.53,106.53,106.72,107.05,106.36,107.48,134,134,134,140.51,141.34,142.72,142.8,142.8,142.8,142.8,142.8,142.8,142.8,142.8,142.5,142.5,142.5,144.32,143.7,143.66,143.76,145.07,145.07,145.07,146.56,146.07,147.68,146.74,146.07,146.07,146.07,146.57,146.42,146.99,147.34,147.64,147.64,147.64,147.35,147.23,147.3,148.1,149.23,149.23,149.23,147.48,147.73,147.75,148.78,149.11,149.11,149.11,152.9,155.05,152.74,153.89,158.16,158.16,158.16,157.08,157.5,159.69,159.13,161.06,161.06,161.06,159.24,159.47,161.16,161,164.7,164.7,164.7,164.7,162.45,162.46,161.75,162.38,162.38,162.38,170.36,169.12,167.18,166.98,170.37,170.37,170.37,169.98,170.59,170.87,172,177.64,177.64,177.64,174.03,185,185.2,185.2,185.2,185.2,185.2,184.49,184.39,179.97,187.12,187.75,187.75,187.75,187.64,188.73,188.76,188.79,188.89,188.89,188.89,197.73,198.28,198.2,197,197.81,197.81,197.81,197.86,196.55,201.81,202.34,200.51,200.51,200.51,200.51,199.07,201.71,199.01,205.52,205.52,205.52,206.18,205.86,204.63,204.74,208.42,208.42,208.42,208.45,206.1,204.12,203.96,204.49,204.49,204.49,204.15,204.57,204.52,205.1,205.1,205.1,205.1,207.35,208.68,208.08,208.27,207.28,207.28,207.28,210.6,210.97,210.22,211.46,210.61,210.61,210.61];
var general_caps = {"2014-01-01":106323.3,"2014-01-02":106015.3,"2014-01-03":105919.9,"2014-01-04":105919.9,"2014-01-05":105919.9,"2014-01-06":106202.45,"2014-01-07":107298.95,"2014-01-08":107873.44,"2014-01-09":108801.86,"2014-01-10":108809.74,"2014-01-11":108809.74,"2014-01-12":108809.74,"2014-01-13":113539.95,"2014-01-14":113852.18,"2014-01-15":113995.82,"2014-01-16":114691.73,"2014-01-17":113262.55,"2014-01-18":113262.55,"2014-01-19":113262.55,"2014-01-20":113464.56,"2014-01-21":113818.21,"2014-01-22":113082.03,"2014-01-23":114275.13,"2014-01-24":142474.3,"2014-01-25":142474.3,"2014-01-26":142474.3,"2014-01-27":149390.91,"2014-01-28":150276.42,"2014-01-29":151743.4,"2014-01-30":151826.12,"2014-01-31":151826.12,"2014-02-01":151826.12,"2014-02-02":151826.12,"2014-02-03":151826.12,"2014-02-04":151826.12,"2014-02-05":151826.12,"2014-02-06":151826.12,"2014-02-07":151512.83,"2014-02-08":151512.83,"2014-02-09":151512.83,"2014-02-10":153450.42,"2014-02-11":152785.95,"2014-02-12":152738.73,"2014-02-13":152848.15,"2014-02-14":154245.63,"2014-02-15":154245.63,"2014-02-16":154245.63,"2014-02-17":155830.26,"2014-02-18":155311.14,"2014-02-19":157022.45,"2014-02-20":156020.1,"2014-02-21":155309.34,"2014-02-22":155309.34,"2014-02-23":155309.34,"2014-02-24":155843,"2014-02-25":155675.16,"2014-02-26":156279.53,"2014-02-27":156651.69,"2014-02-28":156979.02,"2014-03-01":156979.02,"2014-03-02":156979.02,"2014-03-03":156670.47,"2014-03-04":156535.17,"2014-03-05":156617.11,"2014-03-06":157465.69,"2014-03-07":158669.91,"2014-03-08":158669.91,"2014-03-09":158669.91,"2014-03-10":156801.01,"2014-03-11":157066.06,"2014-03-12":157096.39,"2014-03-13":158185.63,"2014-03-14":158543.11,"2014-03-15":158543.11,"2014-03-16":158543.11,"2014-03-17":162567.59,"2014-03-18":164853.25,"2014-03-19":162399.78,"2014-03-20":163622.18,"2014-03-21":168163.15,"2014-03-22":168163.15,"2014-03-23":168163.15,"2014-03-24":167011.88,"2014-03-25":167458.38,"2014-03-26":169786.4,"2014-03-27":169189.05,"2014-03-28":171244.13,"2014-03-29":171244.13,"2014-03-30":171244.13,"2014-03-31":169313.26,"2014-04-01":169558.36,"2014-04-02":171348.55,"2014-04-03":171179.83,"2014-04-04":175117.36,"2014-04-05":175117.36,"2014-04-06":175117.36,"2014-04-07":175117.36,"2014-04-08":172720.94,"2014-04-09":172736.33,"2014-04-10":171978.2,"2014-04-11":172644.58,"2014-04-12":172644.58,"2014-04-13":172644.58,"2014-04-14":181132.86,"2014-04-15":179819,"2014-04-16":177755.07,"2014-04-17":177537.51,"2014-04-18":181143.94,"2014-04-19":181143.94,"2014-04-20":181143.94,"2014-04-21":180724.57,"2014-04-22":181373.36,"2014-04-23":181670.91,"2014-04-24":182877.08,"2014-04-25":188873.56,"2014-04-26":188873.56,"2014-04-27":188873.56,"2014-04-28":185037.01,"2014-04-29":196702.8,"2014-04-30":196913.54,"2014-05-01":196913.54,"2014-05-02":196913.54,"2014-05-03":196913.54,"2014-05-04":196913.54,"2014-05-05":196156.15,"2014-05-06":196052.49,"2014-05-07":191354.95,"2014-05-08":198952.96,"2014-05-09":199625.11,"2014-05-10":199625.11,"2014-05-11":199625.11,"2014-05-12":199508.69,"2014-05-13":200662.29,"2014-05-14":200696.79,"2014-05-15":200724.8,"2014-05-16":200833.31,"2014-05-17":200833.31,"2014-05-18":200833.31,"2014-05-19":210235.8,"2014-05-20":210822.99,"2014-05-21":210734.66,"2014-05-22":209458.06,"2014-05-23":210316.53,"2014-05-24":210316.53,"2014-05-25":210316.53,"2014-05-26":210371.06,"2014-05-27":208977.89,"2014-05-28":214572.6,"2014-05-29":215131.42,"2014-05-30":213193.46,"2014-05-31":213193.46,"2014-06-01":213193.46,"2014-06-02":213193.46,"2014-06-03":211662.13,"2014-06-04":214462.81,"2014-06-05":211599.21,"2014-06-06":218512.65,"2014-06-07":218512.65,"2014-06-08":218512.65,"2014-06-09":219217.88,"2014-06-10":218873.65,"2014-06-11":217573.06,"2014-06-12":217683.26,"2014-06-13":221597.46,"2014-06-14":221597.46,"2014-06-15":221597.46,"2014-06-16":221628.09,"2014-06-17":219129.82,"2014-06-18":217031.31,"2014-06-19":216862.23,"2014-06-20":217419.43,"2014-06-21":217419.43,"2014-06-22":217419.43,"2014-06-23":217061.65,"2014-06-24":217501.85,"2014-06-25":217452.08,"2014-06-26":218067.82,"2014-06-27":218065.64,"2014-06-28":218065.64,"2014-06-29":218065.64,"2014-06-30":220460.91,"2014-07-01":221875.55,"2014-07-02":221242.55,"2014-07-03":221443.62,"2014-07-04":220381.96,"2014-07-05":220381.96,"2014-07-06":220381.96,"2014-07-07":223916.82,"2014-07-08":224311.41,"2014-07-09":223511.2,"2014-07-10":224826.49,"2014-07-11":223930,"2014-07-12":223930,"2014-07-13":223930};
var www_lang = {"otc_date":"日期","otc_index":"指数","otc_company_count":"公司数","otc_market":"企业总值"};
var otc_general_line_chart = {
    chart: {
                type: 'areaspline',
                height: 205,
                //zoomType: 'x',
                backgroundColor: 'rgba(255, 255, 255, 0)',
                renderTo:'otc_general_line'
            },
            title: {
                //text: otc_city + '市场综合指数'
                text: null
            },
            xAxis: {
              labels: {
                formatter: function() {
                    if(general_dates[this.value] == undefined) return '';
                    return general_dates[this.value].substr( -5 ); // clean, unformatted number for year
                },
                rotation: -30,
                style: {
                  fontSize: '10px',
                  color: 'black'
                }
              },
              tickPixelInterval: 60

            },
            yAxis: {
                title: {
                    text: null
                },
                min: general_min_y,
                max: general_max_y,
                gridLineColor: 'rgba(144,147,144,0.5)',
                showFirstLabel: false,
                tickPixelInterval: 60,
                labels:{
                    style:{
                        color: 'black'
                    }
                }
            },
            tooltip: {
                formatter: function() {
                    if(general_dates[this.x] == undefined || general_caps[general_dates[this.x]] == undefined) return '';
                    return www_lang.otc_date + ": " + general_dates[this.x] + '<br/>' + www_lang.otc_index + ": " + this.y + '<br/>' + 
                    www_lang.otc_market + ": " + number_format( general_caps[general_dates[this.x]], 2 ) + "M";
                }
            },
            legend: {
                enabled: false
            },
            plotOptions: {
              areaspline: {
                color: 'rgba(66,138,222,1)',
                lineWidth: 0.8,
                fillOpacity: 0.5,
                pointStart: 0,
                marker: {
                  enabled: false,
                  symbol: 'circle',
                  radius: 1,
                  states: {
                    hover: {
                      enabled: true
                    }
                  }
                },
                fillColor: {
                  linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1.5},
                  stops: [
                    [0, 'rgba(222,237,243,0.5)'],
                    [1, 'rgba(222,237,243,0.5)']
                  ]
                }
              }
                //pointRange: 50
            },
            credits: {
                enabled: false
            },
            series: [{
                //pointInterval: 500,
                data: general_y
            }]
}

//var scale_counts = {"2013-01-01":"651","2013-01-02":"651","2013-01-03":"651","2013-01-04":"651","2013-01-05":"651","2013-01-06":"651","2013-01-07":"651","2013-01-08":"651","2013-01-09":"651","2013-01-10":"651","2013-01-11":"651","2013-01-12":"651","2013-01-13":"651","2013-01-14":"651","2013-01-15":"651","2013-01-16":"651","2013-01-17":"651","2013-01-18":"651","2013-01-19":"651","2013-01-20":"651","2013-01-21":"651","2013-01-22":"653","2013-01-23":"653","2013-01-24":"654","2013-01-25":"654","2013-01-26":"654","2013-01-27":"654","2013-01-28":"654","2013-01-29":"655","2013-01-30":"666","2013-01-31":"667","2013-02-01":"667","2013-02-02":"667","2013-02-03":"667","2013-02-04":"667","2013-02-05":"667","2013-02-06":"669","2013-02-07":"669","2013-02-08":"669","2013-02-09":"669","2013-02-10":"669","2013-02-11":"669","2013-02-12":"669","2013-02-13":"669","2013-02-14":"669","2013-02-15":"669","2013-02-16":"669","2013-02-17":"669","2013-02-18":"669","2013-02-19":"669","2013-02-20":"669","2013-02-21":"669","2013-02-22":"669","2013-02-23":"669","2013-02-24":"669","2013-02-25":"669","2013-02-26":"669","2013-02-27":"669","2013-02-28":"670","2013-03-01":"670","2013-03-02":"670","2013-03-03":"670","2013-03-04":"670","2013-03-05":"670","2013-03-06":"670","2013-03-07":"670","2013-03-08":"670","2013-03-09":"670","2013-03-10":"670","2013-03-11":"670","2013-03-12":"670","2013-03-13":"674","2013-03-14":"674","2013-03-15":"674","2013-03-16":"674","2013-03-17":"674","2013-03-18":"675","2013-03-19":"675","2013-03-20":"675","2013-03-21":"675","2013-03-22":"675","2013-03-23":"675","2013-03-24":"675","2013-03-25":"675","2013-03-26":"676","2013-03-27":"676","2013-03-28":"681","2013-03-29":"684","2013-03-30":"684","2013-03-31":"684","2013-04-01":"684","2013-04-02":"684","2013-04-03":"684","2013-04-04":"684","2013-04-05":"684","2013-04-06":"684","2013-04-07":"684","2013-04-08":"684","2013-04-09":"684","2013-04-10":"684","2013-04-11":"684","2013-04-12":"684","2013-04-13":"684","2013-04-14":"684","2013-04-15":"684","2013-04-16":"684","2013-04-17":"688","2013-04-18":"688","2013-04-19":"688","2013-04-20":"688","2013-04-21":"688","2013-04-22":"688","2013-04-23":"688","2013-04-24":"688","2013-04-25":"701","2013-04-26":"701","2013-04-27":"701","2013-04-28":"701","2013-04-29":"701","2013-04-30":"701","2013-05-01":"701","2013-05-02":"701","2013-05-03":"701","2013-05-04":"701","2013-05-05":"701","2013-05-06":"701","2013-05-07":"702","2013-05-08":"703","2013-05-09":"703","2013-05-10":"703","2013-05-11":"703","2013-05-12":"703","2013-05-13":"703","2013-05-14":"703","2013-05-15":"703","2013-05-16":"705","2013-05-17":"710","2013-05-18":"710","2013-05-19":"710","2013-05-20":"710","2013-05-21":"710","2013-05-22":"710","2013-05-23":"710","2013-05-24":"710","2013-05-25":"710","2013-05-26":"710","2013-05-27":"710","2013-05-28":"721","2013-05-29":"721","2013-05-30":"721","2013-05-31":"725","2013-06-01":"725","2013-06-02":"725","2013-06-03":"725","2013-06-04":"725","2013-06-05":"725","2013-06-06":"725","2013-06-07":"729","2013-06-08":"729","2013-06-09":"731","2013-06-10":"731","2013-06-11":"731","2013-06-12":"731","2013-06-13":"731","2013-06-14":"732","2013-06-15":"732","2013-06-16":"732","2013-06-17":"732","2013-06-18":"733","2013-06-19":"734","2013-06-20":"734","2013-06-21":"734","2013-06-22":"734","2013-06-23":"734","2013-06-24":"737","2013-06-25":"737","2013-06-26":"748","2013-06-27":"748","2013-06-28":"757","2013-06-29":"757","2013-06-30":"757","2013-07-01":"758","2013-07-02":"766","2013-07-03":"770","2013-07-04":"775","2013-07-05":"788","2013-07-06":"788","2013-07-07":"788","2013-07-08":"789","2013-07-09":"790","2013-07-10":"790","2013-07-11":"790","2013-07-12":"790","2013-07-13":"790","2013-07-14":"790","2013-07-15":"790","2013-07-16":"790","2013-07-17":"790","2013-07-18":"798","2013-07-19":"800","2013-07-20":"800","2013-07-21":"800","2013-07-22":"807","2013-07-23":"817","2013-07-24":"818","2013-07-25":"819","2013-07-26":"822","2013-07-27":"822","2013-07-28":"822","2013-07-29":"823","2013-07-30":"834","2013-07-31":"835","2013-08-01":"836","2013-08-02":"837","2013-08-03":"837","2013-08-04":"837","2013-08-05":"842","2013-08-06":"845","2013-08-07":"849","2013-08-08":"871","2013-08-09":"875","2013-08-10":"875","2013-08-11":"875","2013-08-12":"876","2013-08-13":"878","2013-08-14":"879","2013-08-15":"881","2013-08-16":"885","2013-08-17":"885","2013-08-18":"885","2013-08-19":"886","2013-08-20":"888","2013-08-21":"888","2013-08-22":"889","2013-08-23":"889","2013-08-24":"889","2013-08-25":"889","2013-08-26":"902","2013-08-27":"902","2013-08-28":"902","2013-08-29":"904","2013-08-30":"920","2013-08-31":"920","2013-09-01":"920","2013-09-02":"920","2013-09-03":"921","2013-09-04":"921","2013-09-05":"921","2013-09-06":"922","2013-09-07":"922","2013-09-08":"922","2013-09-09":"924","2013-09-10":"924","2013-09-11":"924","2013-09-12":"926","2013-09-13":"944","2013-09-14":"944","2013-09-15":"944","2013-09-16":"944","2013-09-17":"944","2013-09-18":"944","2013-09-19":"944","2013-09-20":"944","2013-09-21":"944","2013-09-22":"944","2013-09-23":"944","2013-09-24":"944","2013-09-25":"946","2013-09-26":"951","2013-09-27":"966","2013-09-28":"970","2013-09-29":"970","2013-09-30":"970","2013-10-01":"970","2013-10-02":"970","2013-10-03":"970","2013-10-04":"970","2013-10-05":"970","2013-10-06":"970","2013-10-07":"970","2013-10-08":"970","2013-10-09":"970","2013-10-10":"970","2013-10-11":"970","2013-10-12":"970","2013-10-13":"970","2013-10-14":"970","2013-10-15":"972","2013-10-16":"984","2013-10-17":"984","2013-10-18":"987","2013-10-19":"987","2013-10-20":"987","2013-10-21":"990","2013-10-22":"993","2013-10-23":"994","2013-10-24":"994","2013-10-25":"994","2013-10-26":"994","2013-10-27":"994","2013-10-28":"994","2013-10-29":"997","2013-10-30":"999","2013-10-31":"1007","2013-11-01":"1009","2013-11-02":"1009","2013-11-03":"1009","2013-11-04":"1018","2013-11-05":"1019","2013-11-06":"1023","2013-11-07":"1023","2013-11-08":"1028","2013-11-09":"1028","2013-11-10":"1028","2013-11-11":"1030","2013-11-12":"1031","2013-11-13":"1034","2013-11-14":"1034","2013-11-15":"1039","2013-11-16":"1039","2013-11-17":"1039","2013-11-18":"1042","2013-11-19":"1042","2013-11-20":"1044","2013-11-21":"1045","2013-11-22":"1045","2013-11-23":"1045","2013-11-24":"1045","2013-11-25":"1045","2013-11-26":"1047","2013-11-27":"1047","2013-11-28":"1060","2013-11-29":"1063","2013-11-30":"1063","2013-12-01":"1063","2013-12-02":"1063","2013-12-03":"1063","2013-12-04":"1063","2013-12-05":"1064","2013-12-06":"1085","2013-12-07":"1085","2013-12-08":"1086","2013-12-09":"1104","2013-12-10":"1107","2013-12-11":"1107","2013-12-12":"1106","2013-12-13":"1108","2013-12-14":"1108","2013-12-15":"1108","2013-12-16":"1109","2013-12-17":"1110","2013-12-18":"1116","2013-12-19":"1117","2013-12-20":"1120","2013-12-21":"1120","2013-12-22":"1120","2013-12-23":"1122","2013-12-24":"1122","2013-12-25":"1126","2013-12-26":"1160","2013-12-27":"1162","2013-12-28":"1162","2013-12-29":"1162","2013-12-30":"1193","2013-12-31":"1229","2014-01-01":"1229","2014-01-02":"1229","2014-01-03":"1229","2014-01-04":"1229","2014-01-05":"1229","2014-01-06":"1229","2014-01-07":"1229","2014-01-08":"1229","2014-01-09":"1227","2014-01-10":"1225","2014-01-11":"1225","2014-01-12":"1225","2014-01-13":"1225","2014-01-14":"1225","2014-01-15":"1228","2014-01-16":"1230","2014-01-17":"1227","2014-01-18":"1227","2014-01-19":"1227","2014-01-20":"1230","2014-01-21":"1237","2014-01-22":"1238","2014-01-23":"1238","2014-01-24":"1504","2014-01-25":"1504","2014-01-26":"1504","2014-01-27":"1504","2014-01-28":"1503","2014-01-29":"1503","2014-01-30":"1502","2014-01-31":"1502","2014-02-01":"1502","2014-02-02":"1502","2014-02-03":"1502","2014-02-04":"1502","2014-02-05":"1502","2014-02-06":"1502","2014-02-07":"1502","2014-02-08":"1502","2014-02-09":"1502","2014-02-10":"1502","2014-02-11":"1502","2014-02-12":"1502","2014-02-13":"1502","2014-02-14":"1508","2014-02-15":"1508","2014-02-16":"1508","2014-02-17":"1510","2014-02-18":"1521","2014-02-19":"1524","2014-02-20":"1527","2014-02-21":"1531","2014-02-22":"1531","2014-02-23":"1531","2014-02-24":"1531","2014-02-25":"1531","2014-02-26":"1530","2014-02-27":"1530","2014-02-28":"1536","2014-03-01":"1536","2014-03-02":"1536","2014-03-03":"1536","2014-03-04":"1536","2014-03-05":"1538","2014-03-06":"1537","2014-03-07":"1540","2014-03-08":"1540","2014-03-09":"1540","2014-03-10":"1540","2014-03-11":"1540","2014-03-12":"1540","2014-03-13":"1542","2014-03-14":"1542","2014-03-15":"1542","2014-03-16":"1542","2014-03-17":"1540","2014-03-18":"1540","2014-03-19":"1540","2014-03-20":"1542","2014-03-21":"1542","2014-03-22":"1542","2014-03-23":"1542","2014-03-24":"1543","2014-03-25":"1543","2014-03-26":"1543","2014-03-27":"1553","2014-03-28":"1560","2014-03-29":"1560","2014-03-30":"1560","2014-03-31":"1563","2014-04-01":"1563","2014-04-02":"1566","2014-04-03":"1566","2014-04-04":"1567","2014-04-05":"1567","2014-04-06":"1567","2014-04-07":"1567","2014-04-08":"1569","2014-04-09":"1574","2014-04-10":"1585","2014-04-11":"1591","2014-04-12":"1591","2014-04-13":"1591","2014-04-14":"1591","2014-04-15":"1594","2014-04-16":"1595","2014-04-17":"1603","2014-04-18":"1606","2014-04-19":"1606","2014-04-20":"1606","2014-04-21":"1606","2014-04-22":"1609","2014-04-23":"1614","2014-04-24":"1626","2014-04-25":"1632","2014-04-26":"1632","2014-04-27":"1632","2014-04-28":"1633","2014-04-29":"1647","2014-04-30":"1661","2014-05-01":"1661","2014-05-02":"1661","2014-05-03":"1661","2014-05-04":"1661","2014-05-05":"1671","2014-05-06":"1683","2014-05-07":"1685","2014-05-08":"1685","2014-05-09":"1685","2014-05-10":"1685","2014-05-11":"1685","2014-05-12":"1685","2014-05-13":"1686","2014-05-14":"1685","2014-05-15":"1686","2014-05-16":"1689","2014-05-17":"1689","2014-05-18":"1689","2014-05-19":"1689","2014-05-20":"1688","2014-05-21":"1688","2014-05-22":"1688","2014-05-23":"1687","2014-05-24":"1687","2014-05-25":"1687","2014-05-26":"1689","2014-05-27":"1690","2014-05-28":"1701","2014-05-29":"1704","2014-05-30":"1726","2014-05-31":"1726","2014-06-01":"1726","2014-06-02":"1726","2014-06-03":"1728","2014-06-04":"1734","2014-06-05":"1736","2014-06-06":"1741","2014-06-07":"1741","2014-06-08":"1741","2014-06-09":"1745","2014-06-10":"1752","2014-06-11":"1754","2014-06-12":"1756","2014-06-13":"1758","2014-06-14":"1758","2014-06-15":"1758","2014-06-16":"1757","2014-06-17":"1757","2014-06-18":"1761","2014-06-19":"1764","2014-06-20":"1767","2014-06-21":"1767","2014-06-22":"1767","2014-06-23":"1772","2014-06-24":"1773","2014-06-25":"1775","2014-06-26":"1780","2014-06-27":"1794","2014-06-28":"1795","2014-06-29":"1795","2014-06-30":"1802","2014-07-01":"1803","2014-07-02":"1804","2014-07-03":"1805","2014-07-04":"1808","2014-07-05":"1808","2014-07-06":"1808","2014-07-07":"1809","2014-07-08":"1815","2014-07-09":"1819","2014-07-10":"1819","2014-07-11":"1826","2014-07-12":"1826","2014-07-13":"1826"};
//var scale_y = [100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100,100.31,100.31,100.46,100.46,100.46,100.46,100.46,100.61,102.3,102.46,102.46,102.46,102.46,102.46,102.46,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.77,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,102.92,103.53,103.53,103.53,103.53,103.53,103.69,103.69,103.69,103.69,103.69,103.69,103.69,103.69,103.84,103.84,104.61,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.07,105.68,105.68,105.68,105.68,105.68,105.68,105.68,105.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.68,107.83,107.99,107.99,107.99,107.99,107.99,107.99,107.99,107.99,108.29,109.06,109.06,109.06,109.06,109.06,109.06,109.06,109.06,109.06,109.06,109.06,110.75,110.75,110.75,111.37,111.37,111.37,111.37,111.37,111.37,111.37,111.98,111.98,112.29,112.29,112.29,112.29,112.29,112.44,112.44,112.44,112.44,112.6,112.75,112.75,112.75,112.75,112.75,113.21,113.21,114.9,114.9,116.28,116.28,116.28,116.44,117.67,118.28,119.05,121.04,121.04,121.04,121.2,121.35,121.35,121.35,121.35,121.35,121.35,121.35,121.35,121.35,122.58,122.89,122.89,122.89,123.96,125.5,125.65,125.81,126.27,126.27,126.27,126.42,128.11,128.26,128.42,128.57,128.57,128.57,129.34,129.8,130.41,133.79,134.41,134.41,134.41,134.56,134.87,135.02,135.33,135.94,135.94,135.94,136.1,136.41,136.41,136.56,136.56,136.56,136.56,138.56,138.56,138.56,138.86,141.32,141.32,141.32,141.32,141.47,141.47,141.47,141.63,141.63,141.63,141.94,141.94,141.94,142.24,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.01,145.31,146.08,148.39,149,149,149,149,149,149,149,149,149,149,149,149,149,149,149,149,149,149.31,151.15,151.15,151.61,151.61,151.61,152.07,152.53,152.69,152.69,152.69,152.69,152.69,152.69,153.15,153.46,154.69,154.99,154.99,154.99,156.37,156.53,157.14,157.14,157.91,157.91,157.91,158.22,158.37,158.83,158.83,159.6,159.6,159.6,160.06,160.06,160.37,160.52,160.52,160.52,160.52,160.52,160.83,160.83,162.83,163.29,163.29,163.29,163.29,163.29,163.29,163.44,166.67,166.67,166.82,169.59,170.05,170.05,169.89,170.2,170.2,170.2,170.35,170.51,171.43,171.58,172.04,172.04,172.04,172.35,172.35,172.96,178.19,178.49,178.49,178.49,183.26,188.79,188.79,188.79,188.79,188.79,188.79,188.79,188.79,188.79,188.48,188.17,188.17,188.17,188.17,188.17,188.63,188.94,188.48,188.48,188.48,188.94,190.02,190.17,190.17,231.03,231.03,231.03,231.03,230.88,230.88,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,230.72,231.64,231.64,231.64,231.95,233.64,234.1,234.56,235.18,235.18,235.18,235.18,235.18,235.02,235.02,235.94,235.94,235.94,235.94,235.94,236.25,236.1,236.56,236.56,236.56,236.56,236.56,236.56,236.87,236.87,236.87,236.87,236.56,236.56,236.56,236.87,236.87,236.87,236.87,237.02,237.02,237.02,238.56,239.63,239.63,239.63,240.09,240.09,240.55,240.55,240.71,240.71,240.71,240.71,241.01,241.78,243.47,244.39,244.39,244.39,244.39,244.85,245.01,246.24,246.7,246.7,246.7,246.7,247.16,247.93,249.77,250.69,250.69,250.69,250.84,253,255.15,255.15,255.15,255.15,255.15,256.68,258.53,258.83,258.83,258.83,258.83,258.83,258.83,258.99,258.83,258.99,259.45,259.45,259.45,259.45,259.29,259.29,259.29,259.14,259.14,259.14,259.45,259.6,261.29,261.75,265.13,265.13,265.13,265.13,265.44,266.36,266.67,267.43,267.43,267.43,268.05,269.12,269.43,269.74,270.05,270.05,270.05,269.89,269.89,270.51,270.97,271.43,271.43,271.43,272.2,272.35,272.66,273.43,275.58,275.73,275.73,276.8,276.96,277.11,277.27,277.73,277.73,277.73,277.88,278.8,279.42,279.42,280.49,280.49,280.49];
//var scale_min_y = 100;
//var scale_max_y = 281;
//var scale_dates = ["2013-01-01","2013-01-02","2013-01-03","2013-01-04","2013-01-05","2013-01-06","2013-01-07","2013-01-08","2013-01-09","2013-01-10","2013-01-11","2013-01-12","2013-01-13","2013-01-14","2013-01-15","2013-01-16","2013-01-17","2013-01-18","2013-01-19","2013-01-20","2013-01-21","2013-01-22","2013-01-23","2013-01-24","2013-01-25","2013-01-26","2013-01-27","2013-01-28","2013-01-29","2013-01-30","2013-01-31","2013-02-01","2013-02-02","2013-02-03","2013-02-04","2013-02-05","2013-02-06","2013-02-07","2013-02-08","2013-02-09","2013-02-10","2013-02-11","2013-02-12","2013-02-13","2013-02-14","2013-02-15","2013-02-16","2013-02-17","2013-02-18","2013-02-19","2013-02-20","2013-02-21","2013-02-22","2013-02-23","2013-02-24","2013-02-25","2013-02-26","2013-02-27","2013-02-28","2013-03-01","2013-03-02","2013-03-03","2013-03-04","2013-03-05","2013-03-06","2013-03-07","2013-03-08","2013-03-09","2013-03-10","2013-03-11","2013-03-12","2013-03-13","2013-03-14","2013-03-15","2013-03-16","2013-03-17","2013-03-18","2013-03-19","2013-03-20","2013-03-21","2013-03-22","2013-03-23","2013-03-24","2013-03-25","2013-03-26","2013-03-27","2013-03-28","2013-03-29","2013-03-30","2013-03-31","2013-04-01","2013-04-02","2013-04-03","2013-04-04","2013-04-05","2013-04-06","2013-04-07","2013-04-08","2013-04-09","2013-04-10","2013-04-11","2013-04-12","2013-04-13","2013-04-14","2013-04-15","2013-04-16","2013-04-17","2013-04-18","2013-04-19","2013-04-20","2013-04-21","2013-04-22","2013-04-23","2013-04-24","2013-04-25","2013-04-26","2013-04-27","2013-04-28","2013-04-29","2013-04-30","2013-05-01","2013-05-02","2013-05-03","2013-05-04","2013-05-05","2013-05-06","2013-05-07","2013-05-08","2013-05-09","2013-05-10","2013-05-11","2013-05-12","2013-05-13","2013-05-14","2013-05-15","2013-05-16","2013-05-17","2013-05-18","2013-05-19","2013-05-20","2013-05-21","2013-05-22","2013-05-23","2013-05-24","2013-05-25","2013-05-26","2013-05-27","2013-05-28","2013-05-29","2013-05-30","2013-05-31","2013-06-01","2013-06-02","2013-06-03","2013-06-04","2013-06-05","2013-06-06","2013-06-07","2013-06-08","2013-06-09","2013-06-10","2013-06-11","2013-06-12","2013-06-13","2013-06-14","2013-06-15","2013-06-16","2013-06-17","2013-06-18","2013-06-19","2013-06-20","2013-06-21","2013-06-22","2013-06-23","2013-06-24","2013-06-25","2013-06-26","2013-06-27","2013-06-28","2013-06-29","2013-06-30","2013-07-01","2013-07-02","2013-07-03","2013-07-04","2013-07-05","2013-07-06","2013-07-07","2013-07-08","2013-07-09","2013-07-10","2013-07-11","2013-07-12","2013-07-13","2013-07-14","2013-07-15","2013-07-16","2013-07-17","2013-07-18","2013-07-19","2013-07-20","2013-07-21","2013-07-22","2013-07-23","2013-07-24","2013-07-25","2013-07-26","2013-07-27","2013-07-28","2013-07-29","2013-07-30","2013-07-31","2013-08-01","2013-08-02","2013-08-03","2013-08-04","2013-08-05","2013-08-06","2013-08-07","2013-08-08","2013-08-09","2013-08-10","2013-08-11","2013-08-12","2013-08-13","2013-08-14","2013-08-15","2013-08-16","2013-08-17","2013-08-18","2013-08-19","2013-08-20","2013-08-21","2013-08-22","2013-08-23","2013-08-24","2013-08-25","2013-08-26","2013-08-27","2013-08-28","2013-08-29","2013-08-30","2013-08-31","2013-09-01","2013-09-02","2013-09-03","2013-09-04","2013-09-05","2013-09-06","2013-09-07","2013-09-08","2013-09-09","2013-09-10","2013-09-11","2013-09-12","2013-09-13","2013-09-14","2013-09-15","2013-09-16","2013-09-17","2013-09-18","2013-09-19","2013-09-20","2013-09-21","2013-09-22","2013-09-23","2013-09-24","2013-09-25","2013-09-26","2013-09-27","2013-09-28","2013-09-29","2013-09-30","2013-10-01","2013-10-02","2013-10-03","2013-10-04","2013-10-05","2013-10-06","2013-10-07","2013-10-08","2013-10-09","2013-10-10","2013-10-11","2013-10-12","2013-10-13","2013-10-14","2013-10-15","2013-10-16","2013-10-17","2013-10-18","2013-10-19","2013-10-20","2013-10-21","2013-10-22","2013-10-23","2013-10-24","2013-10-25","2013-10-26","2013-10-27","2013-10-28","2013-10-29","2013-10-30","2013-10-31","2013-11-01","2013-11-02","2013-11-03","2013-11-04","2013-11-05","2013-11-06","2013-11-07","2013-11-08","2013-11-09","2013-11-10","2013-11-11","2013-11-12","2013-11-13","2013-11-14","2013-11-15","2013-11-16","2013-11-17","2013-11-18","2013-11-19","2013-11-20","2013-11-21","2013-11-22","2013-11-23","2013-11-24","2013-11-25","2013-11-26","2013-11-27","2013-11-28","2013-11-29","2013-11-30","2013-12-01","2013-12-02","2013-12-03","2013-12-04","2013-12-05","2013-12-06","2013-12-07","2013-12-08","2013-12-09","2013-12-10","2013-12-11","2013-12-12","2013-12-13","2013-12-14","2013-12-15","2013-12-16","2013-12-17","2013-12-18","2013-12-19","2013-12-20","2013-12-21","2013-12-22","2013-12-23","2013-12-24","2013-12-25","2013-12-26","2013-12-27","2013-12-28","2013-12-29","2013-12-30","2013-12-31","2014-01-01","2014-01-02","2014-01-03","2014-01-04","2014-01-05","2014-01-06","2014-01-07","2014-01-08","2014-01-09","2014-01-10","2014-01-11","2014-01-12","2014-01-13","2014-01-14","2014-01-15","2014-01-16","2014-01-17","2014-01-18","2014-01-19","2014-01-20","2014-01-21","2014-01-22","2014-01-23","2014-01-24","2014-01-25","2014-01-26","2014-01-27","2014-01-28","2014-01-29","2014-01-30","2014-01-31","2014-02-01","2014-02-02","2014-02-03","2014-02-04","2014-02-05","2014-02-06","2014-02-07","2014-02-08","2014-02-09","2014-02-10","2014-02-11","2014-02-12","2014-02-13","2014-02-14","2014-02-15","2014-02-16","2014-02-17","2014-02-18","2014-02-19","2014-02-20","2014-02-21","2014-02-22","2014-02-23","2014-02-24","2014-02-25","2014-02-26","2014-02-27","2014-02-28","2014-03-01","2014-03-02","2014-03-03","2014-03-04","2014-03-05","2014-03-06","2014-03-07","2014-03-08","2014-03-09","2014-03-10","2014-03-11","2014-03-12","2014-03-13","2014-03-14","2014-03-15","2014-03-16","2014-03-17","2014-03-18","2014-03-19","2014-03-20","2014-03-21","2014-03-22","2014-03-23","2014-03-24","2014-03-25","2014-03-26","2014-03-27","2014-03-28","2014-03-29","2014-03-30","2014-03-31","2014-04-01","2014-04-02","2014-04-03","2014-04-04","2014-04-05","2014-04-06","2014-04-07","2014-04-08","2014-04-09","2014-04-10","2014-04-11","2014-04-12","2014-04-13","2014-04-14","2014-04-15","2014-04-16","2014-04-17","2014-04-18","2014-04-19","2014-04-20","2014-04-21","2014-04-22","2014-04-23","2014-04-24","2014-04-25","2014-04-26","2014-04-27","2014-04-28","2014-04-29","2014-04-30","2014-05-01","2014-05-02","2014-05-03","2014-05-04","2014-05-05","2014-05-06","2014-05-07","2014-05-08","2014-05-09","2014-05-10","2014-05-11","2014-05-12","2014-05-13","2014-05-14","2014-05-15","2014-05-16","2014-05-17","2014-05-18","2014-05-19","2014-05-20","2014-05-21","2014-05-22","2014-05-23","2014-05-24","2014-05-25","2014-05-26","2014-05-27","2014-05-28","2014-05-29","2014-05-30","2014-05-31","2014-06-01","2014-06-02","2014-06-03","2014-06-04","2014-06-05","2014-06-06","2014-06-07","2014-06-08","2014-06-09","2014-06-10","2014-06-11","2014-06-12","2014-06-13","2014-06-14","2014-06-15","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-20","2014-06-21","2014-06-22","2014-06-23","2014-06-24","2014-06-25","2014-06-26","2014-06-27","2014-06-28","2014-06-29","2014-06-30","2014-07-01","2014-07-02","2014-07-03","2014-07-04","2014-07-05","2014-07-06","2014-07-07","2014-07-08","2014-07-09","2014-07-10","2014-07-11","2014-07-12","2014-07-13"];
var scale_dates,scale_counts

var industry_line_chart = {
    chart: {
                type: 'areaspline',
                marginLeft:50,
                marginRight:10,
                backgroundColor: 'rgba(255, 255, 255, 0)',
                renderTo:'industry_line'
            },
            title: {
                //text: otc_city + '市场规模指数'
                text: null
            },
            xAxis: {
                labels: {
                    formatter: function() {
                        if(scale_dates[this.value] == undefined) return '';
                        return scale_dates[this.value].substr( 0, 7); // clean, unformatted number for year
                    },
                    rotation: -30,
                    align: 'right',
                    x: 20,
                    style: {
                      fontSize: '10px'
                    }
                },
                tickPixelInterval: 60
            },
            yAxis: {
                title: {
                    text: null
                },
                //min: scale_min_y,
                //max: scale_max_y,
                tickPixelInterval: 30
            },
            tooltip : {
                formatter: function() {
                    if(scale_dates[this.x] == undefined || scale_counts[scale_dates[this.x]] == undefined) return '';
                    return www_lang.otc_date + ": " + scale_dates[this.x] + '<br/>' + www_lang.otc_index + ': ' + this.y + 
                    "<br/>" + www_lang.otc_company_count + ": " + scale_counts[scale_dates[this.x]];
                }
            },
            legend: {
                enabled: false
            },
            plotOptions: {
              areaspline: {
                fillOpacity: 0.5,
                lineWidth: 0.8,
                pointStart: 0,
                marker: {
                  enabled: false,
                  symbol: 'circle',
                  radius: 1,
                  states: {
                    hover: {
                      enabled: true
                    }
                  }
                },
                fillColor: {
                    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
                    stops: [
                      [0,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')],
                      [1,'rgba(69,140,220,1)']
                    ]
                }
              }
                //pointRange: 50
            },
            credits: {
                enabled: false
            },
            series: []
            //series: [{
            //    //pointInterval: 500,
            //   data: []
            //}]
}

var industry_column_chart = {
            chart: {
                type: 'column',
                renderTo : 'industry_column'
            },
            title: {
                text: null
            },
            xAxis: {
                type: 'category'
                //labels: {
                 //   rotation: -55,
                //}
            },
            yAxis: {
                min: 0,
                title: {
                    text: null
                }
            },
            legend: {
                enabled: false
            },
            tooltip: {
                pointFormat: '{point.y}家公司'
            },
            credits: {
                enabled: false
            },
            series: []
};

var industry_pie_chart = {
            chart: {
                renderTo: 'industry_pie',
                plotBackgroundColor: null,
                plotBorderWidth: 0,
                plotShadow: false,
                height: 300,
                backgroundColor: 'rgba(255, 255, 255, 0)'
            },
            title: {
                text: null
            },
            tooltip: {
                formatter: function() {
                    return this.point.name + ':<b>' + Math.round(this.point.percentage*Math.pow(10,1))/Math.pow(10,1) +'%</b>';
                }
            },
            legend:{
              layout: 'vertical',
              align: 'left',
              verticalAlign: 'middle',
              borderRadius: 5,
              borderWidth: 1,
              backgroundColor: '#FFFFFF',
              padding: 8,
              y: 5,
              useHTML: true,
              labelFormatter: function(){
                return '<div style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;" title="' + this.name + '">' + this.name +'</div>';
              }
            },
            plotOptions: {
                pie: {
                    dataLabels: {
                        enabled: true,
                        distance: 20,
                        format: '{point.percentage:.1f} %'
                        //format: '{point.name}<br/>{point.percentage:.1f} %'
                    },
                    showInLegend: true
                }
            },
            credits: {
                enabled: false
            },
            series: []
};
   
$(document).ready(function(){
    //new Highcharts.Chart(industry_line_chart);
    $.ajax({
        url:'/otc/industry_line_chart',
        method:'get',
        dateType:'json',
        success:function(data){

            window.scale_counts = data.scale_counts
            window.scale_dates = data.scale_dates
            
            industry_line_chart.yAxis.min = data.scale_min_y
            industry_line_chart.yAxis.max = data.scale_max_y
            var series = {}
            series.data = data.scale_y
            industry_line_chart.series.push(series);
            new Highcharts.Chart(industry_line_chart);
        },
        error:function(date){
            //alert('error');
        }
    });

    new Highcharts.Chart(otc_general_line_chart);
    $.ajax({
        url:'/otc/industry_pie',
        method:'get',
        dateType:'json',
        success:function(data){
            //data = eval('('+data+')')
            //alert(data);
            var series = {};
            series.type = 'pie';
            series.data = data;
            industry_pie_chart.series.push(series);
            new Highcharts.Chart(industry_pie_chart);
        },
        error:function(date){
            //alert('error');
        }
    });

    $.ajax({
        url:'/otc/industry_column',
        method:'get',
        dateType:'json',
        success:function(data){
            //alert(data)
            var series = {};
            var dataLabels = {
                    enabled: true,                  
                    style: {
                        fontSize: '13px'
                    }
                };
            series.dataLabels = dataLabels;
            series.data = data;
            industry_column_chart.series.push(series);
            new Highcharts.Chart(industry_column_chart);
        },
        error:function(data){
            //alert('error');
        }
    });
});



function number_format(number, decimals, dec_point, thousands_sep) {  
    var n = !isFinite(+number) ? 0 : +number,  
        prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),  
        sep = (typeof thousands_sep === 'undefined') ? ',' : thousands_sep,  
        dec = (typeof dec_point === 'undefined') ? '.' : dec_point,  
        s = '',  
        toFixedFix = function (n, prec) {  
            var k = Math.pow(10, prec);  
            return '' + Math.round(n * k) / k;        };  
    // Fix for IE parseFloat(0.55).toFixed(0) = 0;  
    s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');  
    if (s[0].length > 3) {  
        s[0] = s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, sep);      
    }  
    if ((s[1] || '').length < prec) {  
        s[1] = s[1] || '';  
        s[1] += new Array(prec - s[1].length + 1).join('0');  
    }    return s.join(dec);  
}